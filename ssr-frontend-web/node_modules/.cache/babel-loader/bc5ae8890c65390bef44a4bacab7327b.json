{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue","mtime":1610608077894},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZVBhZ2UiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBIb21lUGFnZURhdGE6IHsKICAgICAgICBpc0xvZ2luOiBmYWxzZSwKICAgICAgICB1aWQ6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwsICJ1c2Vycy9nZXQvdXNlci8iKTsKICAgIGZldGNoKHVybCwgewogICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICB9LAogICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgbW9kZTogJ2NvcnMnCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgIHJldHVybiByZXNwLmpzb24oKTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgaWYgKHJlc3Auc3RhdHVzID09PSAnb2snKSB7CiAgICAgICAgX3RoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IHJlc3AuY29udGVudC51c2VybmFtZTsKICAgICAgICBfdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX3RoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IG51bGw7CiAgICAgICAgX3RoaXMuSG9tZVBhZ2VEYXRhLmlzTG9naW4gPSBmYWxzZTsKICAgICAgfQogICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICBjb25zb2xlLmxvZygnZmFpbCB0byBnZXQgY3VycmVudCB1c2VyLicpOwogICAgICBjb25zb2xlLmxvZygncmVhc29uOicsIHJlYXNvbik7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUxvZ291dDogZnVuY3Rpb24gaGFuZGxlTG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB1cmwgPSBwcm9jZXNzLmVudi5WVUVfQVBQX1VSTCArICd1c2Vycy9sb2dvdXQvJzsgLy8gbGV0IHVybCA9IHRoaXMuQkFTRV9VUkwgKyAndXNlcnMvbG9nb3V0Lyc7CgogICAgICBmZXRjaCh1cmwsIHsKICAgICAgICBjcmVkZW50aWFsczogJ2luY2x1ZGUnLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICB9LAogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIG1vZGU6ICdjb3JzJwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgcmV0dXJuIHJlc3AuanNvbigpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgX3RoaXMyLkhvbWVQYWdlRGF0YS51aWQgPSBudWxsOwogICAgICAgIF90aGlzMi5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IGZhbHNlOwoKICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT09ICdvaycpIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+eZu+WHuuaIkOWKn+OAgicsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfnlKjmiLflt7Lnmbvlh7onLAogICAgICAgICAgICBzaG93Q2xvc2U6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKHJlYXNvbikgewogICAgICAgIGNvbnNvbGUubG9nKCdyZWFzb246JywgcmVhc29uKTsKCiAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiAn572R57uc5pWF6Zqc5oiW5pyN5Yqh5Zmo5LiN5Y+v55So44CCJywKICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Q6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdChrZXksIGtleVBhdGgpIHsKICAgICAgY29uc29sZS5sb2coJ2tleTonLCBrZXksIGtleVBhdGgpOwogICAgICB2YXIgcm91dGU7CgogICAgICBzd2l0Y2ggKGtleSkgewogICAgICAgIGNhc2UgJ2hvbWUnOgogICAgICAgICAgcm91dGUgPSAnLyc7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAnbG9nb3V0JzoKICAgICAgICAgIHRoaXMuaGFuZGxlTG9nb3V0KCk7CiAgICAgICAgICByb3V0ZSA9ICcvJzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcm91dGUgPSBrZXk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCdyb3V0ZTonLCByb3V0ZSk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHJvdXRlKTsKICAgIH0sCiAgICBoYW5kbGVNZXNzYWdlOiBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKG1lc3NhZ2UpIHsKICAgICAgLy8gY29uc29sZS5sb2cobWVzc2FnZSk7CiAgICAgIHN3aXRjaCAobWVzc2FnZS50eXBlKSB7CiAgICAgICAgY2FzZSAnbG9naW4nOgogICAgICAgICAgdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IHRydWU7CiAgICAgICAgICB0aGlzLkhvbWVQYWdlRGF0YS51aWQgPSBtZXNzYWdlLnVpZDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["HomePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AACA,QAAA,OAAA,EAAA,KADA;AAEA,QAAA,GAAA,EAAA;AAFA;AADA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AAAA;;AACA,QAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,WAAA,oBAAA;AACA,IAAA,KAAA,CAAA,GAAA,EAAA;AACA,MAAA,WAAA,EAAA,SADA;AAEA,MAAA,OAAA,EAAA;AACA,wBAAA;AADA,OAFA;AAKA,MAAA,MAAA,EAAA,MALA;AAMA,MAAA,IAAA,EAAA;AANA,KAAA,CAAA,CAQA,IARA,CAQA,UAAA,IAAA;AAAA,aAAA,IAAA,CAAA,IAAA,EAAA;AAAA,KARA,EASA,IATA,CASA,UAAA,IAAA,EAAA;AACA,UAAA,IAAA,CAAA,MAAA,KAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,GAAA,GAAA,IAAA,CAAA,OAAA,CAAA,QAAA;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,OAAA,GAAA,IAAA;AACA,OAHA,MAGA;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,GAAA,GAAA,IAAA;AACA,QAAA,KAAA,CAAA,YAAA,CAAA,OAAA,GAAA,KAAA;AACA;AACA,KAjBA,EAkBA,KAlBA,CAkBA,UAAA,MAAA,EAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,2BAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,MAAA;AACA,KArBA;AAsBA,GAlCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AAAA;;AACA,UAAA,GAAA,GAAA,OAAA,CAAA,GAAA,CAAA,WAAA,GAAA,eAAA,CADA,CAEA;;AACA,MAAA,KAAA,CAAA,GAAA,EAAA;AACA,QAAA,WAAA,EAAA,SADA;AAEA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA,SAFA;AAKA,QAAA,MAAA,EAAA,MALA;AAMA,QAAA,IAAA,EAAA;AANA,OAAA,CAAA,CAQA,IARA,CAQA,UAAA,IAAA;AAAA,eAAA,IAAA,CAAA,IAAA,EAAA;AAAA,OARA,EASA,IATA,CASA,UAAA,IAAA,EAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,GAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,YAAA,CAAA,OAAA,GAAA,KAAA;;AACA,YAAA,IAAA,CAAA,MAAA,KAAA,IAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA,OAFA;AAGA,YAAA,SAAA,EAAA;AAHA,WAAA;AAKA,SANA,MAMA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,OADA;AAEA,YAAA,OAAA,EAAA,OAFA;AAGA,YAAA,SAAA,EAAA;AAHA,WAAA;AAKA;AACA,OAzBA,EA0BA,KA1BA,CA0BA,UAAA,MAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,SAAA,EAAA,MAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,OAAA,EAAA,cAFA;AAGA,UAAA,SAAA,EAAA;AAHA,SAAA;AAKA,OAjCA;AAkCA,KAtCA;AAuCA,IAAA,YAvCA,wBAuCA,GAvCA,EAuCA,OAvCA,EAuCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA,EAAA,GAAA,EAAA,OAAA;AACA,UAAA,KAAA;;AACA,cAAA,GAAA;AACA,aAAA,MAAA;AACA,UAAA,KAAA,GAAA,GAAA;AACA;;AACA,aAAA,QAAA;AACA,eAAA,YAAA;AACA,UAAA,KAAA,GAAA,GAAA;AACA;;AACA;AACA,UAAA,KAAA,GAAA,GAAA;AATA;;AAWA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,EAAA,KAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,KAAA;AACA,KAvDA;AAwDA,IAAA,aAxDA,yBAwDA,OAxDA,EAwDA;AACA;AACA,cAAA,OAAA,CAAA,IAAA;AACA,aAAA,OAAA;AACA,eAAA,YAAA,CAAA,OAAA,GAAA,IAAA;AACA,eAAA,YAAA,CAAA,GAAA,GAAA,OAAA,CAAA,GAAA;AACA;;AACA;AACA;AANA;AAQA;AAlEA;AAnCA,CAAA","sourcesContent":["<template>\r\n\t<div id=\"HomePage\">\r\n\t\t<el-menu\r\n\t\t\tclass=\"el-menu-demo\"\r\n\t\t\tmode=\"horizontal\"\r\n\t\t\t@select=\"handleSelect\">\r\n\t\t\t<el-menu-item index=\"home\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-house\"></i>\r\n\t\t\t\t<span slot=\"title\">主页</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"login\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-unlock\"></i>\r\n\t\t\t\t<span slot=\"title\">登录</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"register\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-edit-outline\"></i>\r\n\t\t\t\t<span slot=\"title\">注册</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-submenu index=\"user\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span>用户</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<el-menu-item-group>\r\n\t\t\t\t\t<el-menu-item index=\"user_info\" disabled>用户名：{{ this.HomePageData.uid }}</el-menu-item>\r\n\t\t\t\t\t<el-menu-item index=\"change_psw\">修改密码</el-menu-item>\r\n\t\t\t\t</el-menu-item-group>\r\n\t\t\t</el-submenu>\r\n\t\t\t<el-menu-item index=\"logout\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t\t<span slot=\"title\">登出</span>\r\n\t\t\t</el-menu-item>\r\n\t\t</el-menu>\r\n\t\t<router-view @message=\"handleMessage\" :HomePageData=\"HomePageData\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"HomePage\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tHomePageData: {\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tuid: null,\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tlet url = `${process.env.VUE_APP_URL}users/get/user/`;\r\n\t\tfetch(url, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t})\r\n\t\t\t.then(resp => resp.json())\r\n\t\t\t.then(resp => {\r\n\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\tthis.HomePageData.uid = resp.content.username;\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(reason => {\r\n\t\t\t\tconsole.log('fail to get current user.')\r\n\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogout() {\r\n\t\t\tlet url = process.env.VUE_APP_URL + 'users/logout/';\r\n\t\t\t// let url = this.BASE_URL + 'users/logout/';\r\n\t\t\tfetch(url, {\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t})\r\n\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '登出成功。',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '用户已登出',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log('key:', key, keyPath);\r\n\t\t\tlet route;\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'home':\r\n\t\t\t\t\troute = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'logout':\r\n\t\t\t\t\tthis.handleLogout();\r\n\t\t\t\t\troute = '/'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\troute = key;\r\n\t\t\t}\r\n\t\t\tconsole.log('route:', route);\r\n\t\t\tthis.$router.push(route);\r\n\t\t},\r\n\t\thandleMessage(message) {\r\n\t\t\t// console.log(message);\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase 'login':\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t\tthis.HomePageData.uid = message.uid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#HomePage {\r\n\tfont-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}