{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue","mtime":1610242898047},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1609653293376},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSG9tZVBhZ2UiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBIb21lUGFnZURhdGE6IHsKICAgICAgICBpc0xvZ2luOiBmYWxzZSwKICAgICAgICB1aWQ6IG51bGwKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8vIGxldCB1cmwgPSAnaHR0cDovLzQ1Ljc3LjE4LjI0Njo4MDAwL3VzZXJzL2dldC91c2VyLyc7CiAgICB2YXIgdXJsID0gJ2h0dHA6Ly8xMjcuMC4wLjE6ODAwMC91c2Vycy9nZXQvdXNlci8nOwogICAgZmV0Y2godXJsLCB7CiAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgIH0sCiAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICBtb2RlOiAnY29ycycKICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgcmV0dXJuIHJlc3AuanNvbigpOwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICBpZiAocmVzcC5zdGF0dXMgPT09ICdvaycpIHsKICAgICAgICBfdGhpcy5Ib21lUGFnZURhdGEudWlkID0gcmVzcC5jb250ZW50LnVzZXJuYW1lOwogICAgICAgIF90aGlzLkhvbWVQYWdlRGF0YS5pc0xvZ2luID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5Ib21lUGFnZURhdGEudWlkID0gbnVsbDsKICAgICAgICBfdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IGZhbHNlOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgIGNvbnNvbGUubG9nKCdmYWlsIHRvIGdldCBjdXJyZW50IHVzZXIuJyk7CiAgICAgIGNvbnNvbGUubG9nKCdyZWFzb246JywgcmVhc29uKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlTG9nb3V0OiBmdW5jdGlvbiBoYW5kbGVMb2dvdXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIHVybCA9IHRoaXMuQkFTRV9VUkwgKyAndXNlcnMvbG9nb3V0Lyc7CiAgICAgIGZldGNoKHVybCwgewogICAgICAgIGNyZWRlbnRpYWxzOiAnaW5jbHVkZScsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgIH0sCiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgbW9kZTogJ2NvcnMnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICByZXR1cm4gcmVzcC5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICBfdGhpczIuSG9tZVBhZ2VEYXRhLnVpZCA9IG51bGw7CiAgICAgICAgX3RoaXMyLkhvbWVQYWdlRGF0YS5pc0xvZ2luID0gZmFsc2U7CgogICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gJ29rJykgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn55m75Ye65oiQ5Yqf44CCJywKICAgICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+W3sueZu+WHuicsCiAgICAgICAgICAgIHNob3dDbG9zZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVhc29uKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlYXNvbjonLCByZWFzb24pOwoKICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgIG1lc3NhZ2U6ICfnvZHnu5zmlYXpmpzmiJbmnI3liqHlmajkuI3lj6/nlKjjgIInLAogICAgICAgICAgc2hvd0Nsb3NlOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdDogZnVuY3Rpb24gaGFuZGxlU2VsZWN0KGtleSwga2V5UGF0aCkgewogICAgICBjb25zb2xlLmxvZygna2V5OicsIGtleSwga2V5UGF0aCk7CiAgICAgIHZhciByb3V0ZTsKCiAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgICAgY2FzZSAnaG9tZSc6CiAgICAgICAgICByb3V0ZSA9ICcvJzsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdsb2dvdXQnOgogICAgICAgICAgdGhpcy5oYW5kbGVMb2dvdXQoKTsKICAgICAgICAgIHJvdXRlID0gJy8nOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByb3V0ZSA9IGtleTsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coJ3JvdXRlOicsIHJvdXRlKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2gocm91dGUpOwogICAgfSwKICAgIGhhbmRsZU1lc3NhZ2U6IGZ1bmN0aW9uIGhhbmRsZU1lc3NhZ2UobWVzc2FnZSkgewogICAgICAvLyBjb25zb2xlLmxvZyhtZXNzYWdlKTsKICAgICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHsKICAgICAgICBjYXNlICdsb2dpbic6CiAgICAgICAgICB0aGlzLkhvbWVQYWdlRGF0YS5pc0xvZ2luID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IG1lc3NhZ2UudWlkOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["HomePage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"HomePage\">\r\n\t\t<el-menu\r\n\t\t\tclass=\"el-menu-demo\"\r\n\t\t\tmode=\"horizontal\"\r\n\t\t\t@select=\"handleSelect\">\r\n\t\t\t<el-menu-item index=\"home\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-house\"></i>\r\n\t\t\t\t<span slot=\"title\">主页</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"login\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-unlock\"></i>\r\n\t\t\t\t<span slot=\"title\">登录</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"register\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-edit-outline\"></i>\r\n\t\t\t\t<span slot=\"title\">注册</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-submenu index=\"user\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span>用户</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<el-menu-item-group>\r\n\t\t\t\t\t<el-menu-item index=\"user_info\" disabled>用户名：{{ this.HomePageData.uid }}</el-menu-item>\r\n\t\t\t\t\t<el-menu-item index=\"change_psw\">修改密码</el-menu-item>\r\n\t\t\t\t</el-menu-item-group>\r\n\t\t\t</el-submenu>\r\n\t\t\t<el-menu-item index=\"logout\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t\t<span slot=\"title\">登出</span>\r\n\t\t\t</el-menu-item>\r\n\t\t</el-menu>\r\n\t\t<router-view @message=\"handleMessage\" :HomePageData=\"HomePageData\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"HomePage\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tHomePageData: {\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tuid: null,\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\t// let url = 'http://45.77.18.246:8000/users/get/user/';\r\n\t\tlet url = 'http://127.0.0.1:8000/users/get/user/';\r\n\t\tfetch(url, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t})\r\n\t\t\t.then(resp => resp.json())\r\n\t\t\t.then(resp => {\r\n\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\tthis.HomePageData.uid = resp.content.username;\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(reason => {\r\n\t\t\t\tconsole.log('fail to get current user.')\r\n\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogout() {\r\n\t\t\tlet url = this.BASE_URL + 'users/logout/';\r\n\t\t\tfetch(url, {\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t})\r\n\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '登出成功。',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '用户已登出',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log('key:', key, keyPath);\r\n\t\t\tlet route;\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'home':\r\n\t\t\t\t\troute = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'logout':\r\n\t\t\t\t\tthis.handleLogout();\r\n\t\t\t\t\troute = '/'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\troute = key;\r\n\t\t\t}\r\n\t\t\tconsole.log('route:', route);\r\n\t\t\tthis.$router.push(route);\r\n\t\t},\r\n\t\thandleMessage(message) {\r\n\t\t\t// console.log(message);\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase 'login':\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t\tthis.HomePageData.uid = message.uid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#HomePage {\r\n\tfont-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}