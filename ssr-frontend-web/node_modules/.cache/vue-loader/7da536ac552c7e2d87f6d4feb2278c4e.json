{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\ChangePassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\ChangePassword.vue","mtime":1609821720152},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1609653293376},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogIkNoYW5nZVBhc3N3b3JkIiwNCglkYXRhKCkgew0KCQlsZXQgY2hlY2tPbGRQc3cgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQoJCQlpZiAodmFsdWUgPT09ICcnKSB7DQoJCQkJcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5pen5a+G56CBJykpOw0KCQkJfSBlbHNlIHsNCgkJCQlpZiAodGhpcy5DaGFuZ2VQc3dGb3JtLm5ld1BzdyAhPT0gJycpIHsNCgkJCQkJdGhpcy4kcmVmcy5DaGFuZ2VQc3dGb3JtLnZhbGlkYXRlRmllbGQoJ25ld1BzdycpOw0KCQkJCX0NCgkJCX0NCgkJCXJldHVybiBjYWxsYmFjaygpOw0KCQl9DQoJCWxldCBjaGVja05ld1BzdyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCgkJCWlmICh2YWx1ZSA9PT0gJycpIHsNCgkJCQlyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXmlrDlr4bnoIEnKSk7DQoJCQl9IGVsc2UgaWYgKHZhbHVlID09PSB0aGlzLkNoYW5nZVBzd0Zvcm0ub2xkUHN3KSB7DQoJCQkJcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign5Lik5qyh5a+G56CB6L6T5YWl5LiA6Ie077yBJykpOw0KCQkJfQ0KCQkJcmV0dXJuIGNhbGxiYWNrKCk7DQoJCX0NCgkJcmV0dXJuIHsNCgkJCUNoYW5nZVBzd0Zvcm06IHsNCgkJCQlvbGRQc3c6ICcnLA0KCQkJCW5ld1BzdzogJycsDQoJCQl9LA0KCQkJcnVsZXM6IHsNCgkJCQlvbGRQc3c6IHt2YWxpZGF0b3I6IGNoZWNrT2xkUHN3LCB0cmlnZ2VyOiAnYmx1cid9LA0KCQkJCW5ld1Bzdzoge3ZhbGlkYXRvcjogY2hlY2tOZXdQc3csIHRyaWdnZXI6ICdibHVyJ30sDQoJCQl9DQoJCX0NCgl9LA0KCW1ldGhvZHM6IHsNCgkJc3VibWl0Rm9ybShmb3JtTmFtZSkgew0KCQkJdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7DQoJCQkJaWYgKHZhbGlkKSB7DQoJCQkJCWNvbnNvbGUubG9nKCdzdWJtaXQhJyk7DQoJCQkJCWxldCB1cmwgPSB0aGlzLkJBU0VfVVJMICsgJ3VzZXJzL3NldC9wc3cvJzsNCgkJCQkJbGV0IGJhc2VNb2RlbCA9IHRoaXMuJHJlZnNbZm9ybU5hbWVdLm1vZGVsOw0KCQkJCQlsZXQgZGF0YSA9IHsNCgkJCQkJCW9sZF9wYXNzd29yZDogYmFzZU1vZGVsLm9sZFBzdywNCgkJCQkJCW5ld19wYXNzd29yZDogYmFzZU1vZGVsLm5ld1BzdywNCgkJCQkJfTsNCgkJCQkJZmV0Y2godXJsLCB7DQoJCQkJCQlib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSwNCgkJCQkJCWNyZWRlbnRpYWxzOiAnaW5jbHVkZScsDQoJCQkJCQloZWFkZXJzOiB7DQoJCQkJCQkJJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywNCgkJCQkJCX0sDQoJCQkJCQltZXRob2Q6ICdQT1NUJywNCgkJCQkJCW1vZGU6ICdjb3JzJywNCgkJCQkJfSkNCgkJCQkJCS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpDQoJCQkJCQkudGhlbihyZXNwID0+IHsNCgkJCQkJCQlpZiAocmVzcC5zdGF0dXMgPT09ICdvaycpIHsNCgkJCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJCQl0eXBlOiAnc3VjY2VzcycsDQoJCQkJCQkJCQltZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywNCgkJCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCQkJfSk7DQoJCQkJCQkJCXRoaXMuJHJvdXRlci5yZXBsYWNlKCcvJyk7DQoJCQkJCQkJCXJldHVybiB0cnVlOw0KCQkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJCWxldCByZWFzb24gPSByZXNwLnR5cGU7DQoJCQkJCQkJCWxldCBtZXNzYWdlOw0KCQkJCQkJCQlzd2l0Y2ggKHJlYXNvbikgew0KCQkJCQkJCQkJY2FzZSAnQWxyZWFkeSBsb2dvdXQuJzoNCgkJCQkJCQkJCQltZXNzYWdlID0gJ+eUqOaIt+W3sueZu+WHuuOAgic7DQoJCQkJCQkJCQkJYnJlYWs7DQoJCQkJCQkJCQljYXNlICdJbnZhbGlkIG5ldyBwYXNzd29yZC4nOg0KCQkJCQkJCQkJCW1lc3NhZ2UgPSAn55So5oi35paw5a+G56CB5LiN5ZCI5rOV44CCJw0KCQkJCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQkJY2FzZSAnTmV3IHBhc3N3b3JkIGNhbm5vdCBiZSB0aGUgc2FtZSB3aXRoIG9sZCBwYXNzd29yZC4nOg0KCQkJCQkJCQkJCW1lc3NhZ2UgPSAn5paw5pen5a+G56CB5LiN6IO955u45ZCM44CCJzsNCgkJCQkJCQkJCQlicmVhazsNCgkJCQkJCQkJCWNhc2UgJ1dyb25nIHBhc3N3b3JkLic6DQoJCQkJCQkJCQkJbWVzc2FnZSA9ICflr4bnoIHplJnor6/jgIInOw0KCQkJCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQkJZGVmYXVsdDoNCgkJCQkJCQkJCQltZXNzYWdlID0gJ+acquefpemUmeivr+OAgic7DQoJCQkJCQkJCX0NCgkJCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJCQl0eXBlOiAnZXJyb3InLA0KCQkJCQkJCQkJbWVzc2FnZSwNCgkJCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCQkJfSk7DQoJCQkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJCQl9DQoJCQkJCQl9KQ0KCQkJCQkJLmNhdGNoKHJlYXNvbiA9PiB7DQoJCQkJCQkJY29uc29sZS5sb2coJ3JlYXNvbjonLCByZWFzb24pOw0KCQkJCQkJCXRoaXMucmVzZXRGb3JtKGZvcm1OYW1lKTsNCgkJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQkJdHlwZTogJ2Vycm9yJywNCgkJCQkJCQkJbWVzc2FnZTogJ+e9kee7nOaVhemanOaIluacjeWKoeWZqOS4jeWPr+eUqOOAgicsDQoJCQkJCQkJCXNob3dDbG9zZTogdHJ1ZQ0KCQkJCQkJCX0pOw0KCQkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJCX0pDQoJCQkJfSBlbHNlIHsNCgkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQl0eXBlOiAnd2FybmluZycsDQoJCQkJCQlzaG93Q2xvc2U6IHRydWUsDQoJCQkJCQltZXNzYWdlOiAn5oKo55qE6L6T5YWl5LiN5ZCI5rOV44CCJw0KCQkJCQl9KTsNCgkJCQkJcmV0dXJuIGZhbHNlOw0KCQkJCX0NCgkJCX0pOw0KCQl9LA0KCQlyZXNldEZvcm0oZm9ybU5hbWUpIHsNCgkJCXRoaXMuJHJlZnNbZm9ybU5hbWVdLnJlc2V0RmllbGRzKCk7DQoJCX0NCgl9DQp9DQo="},{"version":3,"sources":["ChangePassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChangePassword.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"ChangePassword\">\r\n\t\t<el-col :span=\"8\" :offset=\"8\">\r\n\t\t\t<h1>修改密码</h1>\r\n\t\t\t<el-form\r\n\t\t\t\t:model=\"ChangePswForm\"\r\n\t\t\t\tstatus-icon :rules=\"rules\"\r\n\t\t\t\tref=\"ChangePswForm\"\r\n\t\t\t\tlabel-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"旧密码\" prop=\"oldPsw\">\r\n\t\t\t\t\t<el-input type=\"password\" autocomplete=\"off\" v-model=\"ChangePswForm.oldPsw\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"新密码\" prop=\"newPsw\">\r\n\t\t\t\t\t<el-input type=\"password\" autocomplete=\"off\" v-model=\"ChangePswForm.newPsw\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ChangePswForm')\">提交</el-button>\r\n\t\t\t\t\t<el-button @click=\"resetForm('ChangePswForm')\">重置</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-col>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"ChangePassword\",\r\n\tdata() {\r\n\t\tlet checkOldPsw = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn callback(new Error('请输入旧密码'));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.ChangePswForm.newPsw !== '') {\r\n\t\t\t\t\tthis.$refs.ChangePswForm.validateField('newPsw');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn callback();\r\n\t\t}\r\n\t\tlet checkNewPsw = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn callback(new Error('请输入新密码'));\r\n\t\t\t} else if (value === this.ChangePswForm.oldPsw) {\r\n\t\t\t\treturn callback(new Error('两次密码输入一致！'));\r\n\t\t\t}\r\n\t\t\treturn callback();\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tChangePswForm: {\r\n\t\t\t\toldPsw: '',\r\n\t\t\t\tnewPsw: '',\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\toldPsw: {validator: checkOldPsw, trigger: 'blur'},\r\n\t\t\t\tnewPsw: {validator: checkNewPsw, trigger: 'blur'},\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tconsole.log('submit!');\r\n\t\t\t\t\tlet url = this.BASE_URL + 'users/set/psw/';\r\n\t\t\t\t\tlet baseModel = this.$refs[formName].model;\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\told_password: baseModel.oldPsw,\r\n\t\t\t\t\t\tnew_password: baseModel.newPsw,\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfetch(url, {\r\n\t\t\t\t\t\tbody: JSON.stringify(data),\r\n\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tmode: 'cors',\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t\t\t.then(resp => {\r\n\t\t\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '修改成功',\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tthis.$router.replace('/');\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet reason = resp.type;\r\n\t\t\t\t\t\t\t\tlet message;\r\n\t\t\t\t\t\t\t\tswitch (reason) {\r\n\t\t\t\t\t\t\t\t\tcase 'Already logout.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '用户已登出。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'Invalid new password.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '用户新密码不合法。'\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'New password cannot be the same with old password.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '新旧密码不能相同。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'Wrong password.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '密码错误。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\tmessage = '未知错误。';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(reason => {\r\n\t\t\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\t\t\tthis.resetForm(formName);\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\tmessage: '您的输入不合法。'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetForm(formName) {\r\n\t\t\tthis.$refs[formName].resetFields();\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}