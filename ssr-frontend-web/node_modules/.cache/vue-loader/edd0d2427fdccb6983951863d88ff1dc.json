{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\RegisterView.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\RegisterView.vue","mtime":1610608077861},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogIlJlZ2lzdGVyVmlldyIsDQoJZGF0YSgpIHsNCgkJbGV0IGNoZWNrTm90RW1wdHkgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQoJCQlpZiAodmFsdWUgPT09ICcnKSB7DQoJCQkJcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign5YC85LiN6IO95Li656m6JykpOw0KCQkJfQ0KCQkJcmV0dXJuIGNhbGxiYWNrKCk7DQoJCX07DQoJCWxldCBjaGVja1BzdyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCgkJCWlmICh2YWx1ZSA9PT0gJycpIHsNCgkJCQlyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXlr4bnoIEnKSk7DQoJCQl9IGVsc2Ugew0KCQkJCWlmICh0aGlzLlJlZ0Zvcm0ucHN3MiAhPT0gJycpIHsNCgkJCQkJdGhpcy4kcmVmcy5SZWdGb3JtLnZhbGlkYXRlRmllbGQoJ3BzdzInKTsNCgkJCQl9DQoJCQl9DQoJCQlyZXR1cm4gY2FsbGJhY2soKTsNCgkJfTsNCgkJbGV0IGNoZWNrUHN3MiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCgkJCWlmICh2YWx1ZSA9PT0gJycpIHsNCgkJCQlyZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCfor7flho3mrKHovpPlhaXlr4bnoIEnKSk7DQoJCQl9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLlJlZ0Zvcm0ucHN3MSkgew0KCQkJCXJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4pOasoeWvhueggei+k+WFpeS4jeS4gOiHtO+8gScpKTsNCgkJCX0NCgkJCXJldHVybiBjYWxsYmFjaygpOw0KCQl9Ow0KCQlyZXR1cm4gew0KCQkJUmVnRm9ybTogew0KCQkJCXVpZDogJycsDQoJCQkJZW1haWw6ICcnLA0KCQkJCXBzdzE6ICcnLA0KCQkJCXBzdzI6ICcnLA0KCQkJfSwNCgkJCXJ1bGVzOiB7DQoJCQkJdWlkOiB7dmFsaWRhdG9yOiBjaGVja05vdEVtcHR5LCB0cmlnZ2VyOiAnYmx1cid9LA0KCQkJCWVtYWlsOiB7dmFsaWRhdG9yOiBjaGVja05vdEVtcHR5LCB0cmlnZ2VyOiAnYmx1cid9LA0KCQkJCXBzdzE6IHt2YWxpZGF0b3I6IGNoZWNrUHN3LCB0cmlnZ2VyOiAnYmx1cid9LA0KCQkJCXBzdzI6IHt2YWxpZGF0b3I6IGNoZWNrUHN3MiwgdHJpZ2dlcjogJ2JsdXInfSwNCgkJCX0NCgkJfTsNCgl9LA0KCW1ldGhvZHM6IHsNCgkJc3VibWl0Rm9ybShmb3JtTmFtZSkgew0KCQkJdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUodmFsaWQgPT4gew0KCQkJCWlmICh2YWxpZCkgew0KCQkJCQljb25zb2xlLmxvZygnc3VibWl0IScpOw0KCQkJCQlsZXQgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwgKyAndXNlcnMvcmVnaXN0ZXIvJzsNCgkJCQkJLy8gbGV0IHVybCA9IHRoaXMuQkFTRV9VUkwgKyAndXNlcnMvcmVnaXN0ZXIvJzsNCgkJCQkJbGV0IGJhc2VNb2RlbCA9IHRoaXMuJHJlZnNbZm9ybU5hbWVdLm1vZGVsOw0KCQkJCQlsZXQgZGF0YSA9IHsNCgkJCQkJCXVzZXJuYW1lOiBiYXNlTW9kZWwudWlkLA0KCQkJCQkJcHN3MTogYmFzZU1vZGVsLnBzdzEsDQoJCQkJCQlwc3cyOiBiYXNlTW9kZWwucHN3MiwNCgkJCQkJCWVtYWlsOiBiYXNlTW9kZWwuZW1haWwsDQoJCQkJCQlhdXRoOiAnYnVzaW5lc3MnLA0KCQkJCQl9Ow0KCQkJCQlmZXRjaCh1cmwsIHsNCgkJCQkJCWJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLA0KCQkJCQkJY3JlZGVudGlhbHM6ICdpbmNsdWRlJywNCgkJCQkJCWhlYWRlcnM6IHsNCgkJCQkJCQknY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KCQkJCQkJfSwNCgkJCQkJCW1ldGhvZDogJ1BPU1QnLA0KCQkJCQkJbW9kZTogJ2NvcnMnLA0KCQkJCQl9KQ0KCQkJCQkJLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSkNCgkJCQkJCS50aGVuKHJlc3AgPT4gew0KCQkJCQkJCWlmIChyZXNwLnN0YXR1cyA9PT0gJ29rJykgew0KCQkJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQkJCXR5cGU6ICdzdWNjZXNzJywNCgkJCQkJCQkJCW1lc3NhZ2U6ICfms6jlhozmiJDlip8nLA0KCQkJCQkJCQkJc2hvd0Nsb3NlOiB0cnVlLA0KCQkJCQkJCQl9KTsNCgkJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCQlsZXQgcmVhc29uID0gcmVzcC50eXBlOw0KCQkJCQkJCQlsZXQgbWVzc2FnZTsNCgkJCQkJCQkJc3dpdGNoIChyZWFzb24pIHsNCgkJCQkJCQkJCWNhc2UgJ0ludmFsaWQgZW1haWwgYWRkcmVzcy4nOg0KCQkJCQkJCQkJCW1lc3NhZ2UgPSAn6YKu5Lu25Zyw5Z2A5LiN5ZCI5rOV44CCJzsNCgkJCQkJCQkJCQlicmVhazsNCgkJCQkJCQkJCWNhc2UgJ1VzZXJuYW1lIGFscmVhZHkgZXhpc3QuJzoNCgkJCQkJCQkJCQltZXNzYWdlID0gJ+eUqOaIt+WQjeW3suWtmOWcqOOAgic7DQoJCQkJCQkJCQkJYnJlYWs7DQoJCQkJCQkJCQljYXNlICdFbWFpbCBhZGRyZXNzIGhhcyBiZWVuIHVzZWQuJzoNCgkJCQkJCQkJCQltZXNzYWdlID0gJ+mCrueuseW3suiiq+eUqOS6juazqOWGjOOAgic7DQoJCQkJCQkJCQkJYnJlYWs7DQoJCQkJCQkJCQljYXNlICdBbHJlYWR5IGxvZ2luLic6DQoJCQkJCQkJCQkJbWVzc2FnZSA9ICfor6XotKblj7flt7LlnKjliKvlpITnmbvlvZXjgIInOw0KCQkJCQkJCQkJCWJyZWFrOw0KCQkJCQkJCQkJZGVmYXVsdDoNCgkJCQkJCQkJCQltZXNzYWdlID0gJ+acquefpemUmeivr+OAgic7DQoJCQkJCQkJCX0NCgkJCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJCQl0eXBlOiAnZXJyb3InLA0KCQkJCQkJCQkJbWVzc2FnZSwNCgkJCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCQkJfSk7DQoJCQkJCQkJfQ0KCQkJCQkJfSkNCgkJCQkJCS5jYXRjaChyZWFzb24gPT4gew0KCQkJCQkJCWNvbnNvbGUubG9nKCdyZWFzb246JywgcmVhc29uKTsNCgkJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQkJdHlwZTogJ2Vycm9yJywNCgkJCQkJCQkJbWVzc2FnZTogJ+e9kee7nOaVhemanOaIluacjeWKoeWZqOS4jeWPr+eUqCcsDQoJCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCQl9KTsNCgkJCQkJCX0pOw0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoaXMuJG1lc3NhZ2Uoew0KCQkJCQkJdHlwZTogJ3dhcm5pbmcnLA0KCQkJCQkJbWVzc2FnZTogJ+aCqOeahOi+k+WFpeS4jeWQiOazleOAgicsDQoJCQkJCQlzaG93Q2xvc2U6IHRydWUsDQoJCQkJCX0pOw0KCQkJCQlyZXR1cm4gZmFsc2U7DQoJCQkJfQ0KCQkJfSk7DQoJCX0sDQoJCXJlc2V0Rm9ybShmb3JtTmFtZSkgew0KCQkJdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsNCgkJfQ0KCX0NCn0NCg=="},{"version":3,"sources":["RegisterView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RegisterView.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"RegisterView\">\r\n\t\t<el-col :span=\"8\" :offset=\"8\">\r\n\t\t\t<h1>用户注册</h1>\r\n\t\t\t<el-form\r\n\t\t\t\t:model=\"RegForm\"\r\n\t\t\t\tstatus-icon :rules=\"rules\"\r\n\t\t\t\tref=\"RegForm\"\r\n\t\t\t\tlabel-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"uid\">\r\n\t\t\t\t\t<el-input v-model=\"RegForm.uid\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"电子邮箱\" prop=\"email\">\r\n\t\t\t\t\t<el-input v-model=\"RegForm.email\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" prop=\"psw1\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"RegForm.psw1\" auto-complete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"重复密码\" prop=\"psw2\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"RegForm.psw2\" auto-complete=\"off\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('RegForm')\">注册</el-button>\r\n\t\t\t\t\t<el-button @click=\"resetForm('RegForm')\">重置</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t</el-col>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"RegisterView\",\r\n\tdata() {\r\n\t\tlet checkNotEmpty = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn callback(new Error('值不能为空'));\r\n\t\t\t}\r\n\t\t\treturn callback();\r\n\t\t};\r\n\t\tlet checkPsw = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn callback(new Error('请输入密码'));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.RegForm.psw2 !== '') {\r\n\t\t\t\t\tthis.$refs.RegForm.validateField('psw2');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn callback();\r\n\t\t};\r\n\t\tlet checkPsw2 = (rule, value, callback) => {\r\n\t\t\tif (value === '') {\r\n\t\t\t\treturn callback(new Error('请再次输入密码'));\r\n\t\t\t} else if (value !== this.RegForm.psw1) {\r\n\t\t\t\treturn callback(new Error('两次密码输入不一致！'));\r\n\t\t\t}\r\n\t\t\treturn callback();\r\n\t\t};\r\n\t\treturn {\r\n\t\t\tRegForm: {\r\n\t\t\t\tuid: '',\r\n\t\t\t\temail: '',\r\n\t\t\t\tpsw1: '',\r\n\t\t\t\tpsw2: '',\r\n\t\t\t},\r\n\t\t\trules: {\r\n\t\t\t\tuid: {validator: checkNotEmpty, trigger: 'blur'},\r\n\t\t\t\temail: {validator: checkNotEmpty, trigger: 'blur'},\r\n\t\t\t\tpsw1: {validator: checkPsw, trigger: 'blur'},\r\n\t\t\t\tpsw2: {validator: checkPsw2, trigger: 'blur'},\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsubmitForm(formName) {\r\n\t\t\tthis.$refs[formName].validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tconsole.log('submit!');\r\n\t\t\t\t\tlet url = process.env.VUE_APP_URL + 'users/register/';\r\n\t\t\t\t\t// let url = this.BASE_URL + 'users/register/';\r\n\t\t\t\t\tlet baseModel = this.$refs[formName].model;\r\n\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\tusername: baseModel.uid,\r\n\t\t\t\t\t\tpsw1: baseModel.psw1,\r\n\t\t\t\t\t\tpsw2: baseModel.psw2,\r\n\t\t\t\t\t\temail: baseModel.email,\r\n\t\t\t\t\t\tauth: 'business',\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfetch(url, {\r\n\t\t\t\t\t\tbody: JSON.stringify(data),\r\n\t\t\t\t\t\tcredentials: 'include',\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\tmode: 'cors',\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t\t\t.then(resp => {\r\n\t\t\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\t\tmessage: '注册成功',\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet reason = resp.type;\r\n\t\t\t\t\t\t\t\tlet message;\r\n\t\t\t\t\t\t\t\tswitch (reason) {\r\n\t\t\t\t\t\t\t\t\tcase 'Invalid email address.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '邮件地址不合法。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'Username already exist.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '用户名已存在。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'Email address has been used.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '邮箱已被用于注册。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 'Already login.':\r\n\t\t\t\t\t\t\t\t\t\tmessage = '该账号已在别处登录。';\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t\tmessage = '未知错误。';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\t\tmessage,\r\n\t\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(reason => {\r\n\t\t\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\t\tmessage: '网络故障或服务器不可用',\r\n\t\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\tmessage: '您的输入不合法。',\r\n\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tresetForm(formName) {\r\n\t\t\tthis.$refs[formName].resetFields();\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#RegisterView {\r\n\tmargin-top: 10%;\r\n}\r\n</style>"]}]}