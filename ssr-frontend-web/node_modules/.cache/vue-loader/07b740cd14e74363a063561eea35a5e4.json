{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue","mtime":1610242898047},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1609653293376},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogIkhvbWVQYWdlIiwNCglkYXRhKCkgew0KCQlyZXR1cm4gew0KCQkJSG9tZVBhZ2VEYXRhOiB7DQoJCQkJaXNMb2dpbjogZmFsc2UsDQoJCQkJdWlkOiBudWxsLA0KCQkJfSwNCgkJfQ0KCX0sDQoJbW91bnRlZCgpIHsNCgkJLy8gbGV0IHVybCA9ICdodHRwOi8vNDUuNzcuMTguMjQ2OjgwMDAvdXNlcnMvZ2V0L3VzZXIvJzsNCgkJbGV0IHVybCA9ICdodHRwOi8vMTI3LjAuMC4xOjgwMDAvdXNlcnMvZ2V0L3VzZXIvJzsNCgkJZmV0Y2godXJsLCB7DQoJCQljcmVkZW50aWFsczogJ2luY2x1ZGUnLA0KCQkJaGVhZGVyczogew0KCQkJCSdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsDQoJCQl9LA0KCQkJbWV0aG9kOiAnUE9TVCcsDQoJCQltb2RlOiAnY29ycycsDQoJCX0pDQoJCQkudGhlbihyZXNwID0+IHJlc3AuanNvbigpKQ0KCQkJLnRoZW4ocmVzcCA9PiB7DQoJCQkJaWYgKHJlc3Auc3RhdHVzID09PSAnb2snKSB7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IHJlc3AuY29udGVudC51c2VybmFtZTsNCgkJCQkJdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IHRydWU7DQoJCQkJfSBlbHNlIHsNCgkJCQkJdGhpcy5Ib21lUGFnZURhdGEudWlkID0gbnVsbDsNCgkJCQkJdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IGZhbHNlOw0KCQkJCX0NCgkJCX0pDQoJCQkuY2F0Y2gocmVhc29uID0+IHsNCgkJCQljb25zb2xlLmxvZygnZmFpbCB0byBnZXQgY3VycmVudCB1c2VyLicpDQoJCQkJY29uc29sZS5sb2coJ3JlYXNvbjonLCByZWFzb24pOw0KCQkJfSk7DQoJfSwNCgltZXRob2RzOiB7DQoJCWhhbmRsZUxvZ291dCgpIHsNCgkJCWxldCB1cmwgPSB0aGlzLkJBU0VfVVJMICsgJ3VzZXJzL2xvZ291dC8nOw0KCQkJZmV0Y2godXJsLCB7DQoJCQkJY3JlZGVudGlhbHM6ICdpbmNsdWRlJywNCgkJCQloZWFkZXJzOiB7DQoJCQkJCSdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsDQoJCQkJfSwNCgkJCQltZXRob2Q6ICdQT1NUJywNCgkJCQltb2RlOiAnY29ycycsDQoJCQl9KQ0KCQkJCS50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpDQoJCQkJLnRoZW4ocmVzcCA9PiB7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IG51bGw7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLmlzTG9naW4gPSBmYWxzZTsNCgkJCQkJaWYgKHJlc3Auc3RhdHVzID09PSAnb2snKSB7DQoJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQl0eXBlOiAnc3VjY2VzcycsDQoJCQkJCQkJbWVzc2FnZTogJ+eZu+WHuuaIkOWKn+OAgicsDQoJCQkJCQkJc2hvd0Nsb3NlOiB0cnVlLA0KCQkJCQkJfSk7DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCQl0eXBlOiAnZXJyb3InLA0KCQkJCQkJCW1lc3NhZ2U6ICfnlKjmiLflt7Lnmbvlh7onLA0KCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCX0pOw0KCQkJCQl9DQoJCQkJfSkNCgkJCQkuY2F0Y2gocmVhc29uID0+IHsNCgkJCQkJY29uc29sZS5sb2coJ3JlYXNvbjonLCByZWFzb24pOw0KCQkJCQl0aGlzLiRtZXNzYWdlKHsNCgkJCQkJCXR5cGU6ICdlcnJvcicsDQoJCQkJCQltZXNzYWdlOiAn572R57uc5pWF6Zqc5oiW5pyN5Yqh5Zmo5LiN5Y+v55So44CCJywNCgkJCQkJCXNob3dDbG9zZTogdHJ1ZQ0KCQkJCQl9KTsNCgkJCQl9KTsNCgkJfSwNCgkJaGFuZGxlU2VsZWN0KGtleSwga2V5UGF0aCkgew0KCQkJY29uc29sZS5sb2coJ2tleTonLCBrZXksIGtleVBhdGgpOw0KCQkJbGV0IHJvdXRlOw0KCQkJc3dpdGNoIChrZXkpIHsNCgkJCQljYXNlICdob21lJzoNCgkJCQkJcm91dGUgPSAnLyc7DQoJCQkJCWJyZWFrOw0KCQkJCWNhc2UgJ2xvZ291dCc6DQoJCQkJCXRoaXMuaGFuZGxlTG9nb3V0KCk7DQoJCQkJCXJvdXRlID0gJy8nDQoJCQkJCWJyZWFrOw0KCQkJCWRlZmF1bHQ6DQoJCQkJCXJvdXRlID0ga2V5Ow0KCQkJfQ0KCQkJY29uc29sZS5sb2coJ3JvdXRlOicsIHJvdXRlKTsNCgkJCXRoaXMuJHJvdXRlci5wdXNoKHJvdXRlKTsNCgkJfSwNCgkJaGFuZGxlTWVzc2FnZShtZXNzYWdlKSB7DQoJCQkvLyBjb25zb2xlLmxvZyhtZXNzYWdlKTsNCgkJCXN3aXRjaCAobWVzc2FnZS50eXBlKSB7DQoJCQkJY2FzZSAnbG9naW4nOg0KCQkJCQl0aGlzLkhvbWVQYWdlRGF0YS5pc0xvZ2luID0gdHJ1ZTsNCgkJCQkJdGhpcy5Ib21lUGFnZURhdGEudWlkID0gbWVzc2FnZS51aWQ7DQoJCQkJCWJyZWFrOw0KCQkJCWRlZmF1bHQ6DQoJCQkJCWJyZWFrOw0KCQkJfQ0KCQl9DQoJfQ0KfQ0K"},{"version":3,"sources":["HomePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomePage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"HomePage\">\r\n\t\t<el-menu\r\n\t\t\tclass=\"el-menu-demo\"\r\n\t\t\tmode=\"horizontal\"\r\n\t\t\t@select=\"handleSelect\">\r\n\t\t\t<el-menu-item index=\"home\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-house\"></i>\r\n\t\t\t\t<span slot=\"title\">主页</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"login\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-unlock\"></i>\r\n\t\t\t\t<span slot=\"title\">登录</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"register\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-edit-outline\"></i>\r\n\t\t\t\t<span slot=\"title\">注册</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-submenu index=\"user\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span>用户</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<el-menu-item-group>\r\n\t\t\t\t\t<el-menu-item index=\"user_info\" disabled>用户名：{{ this.HomePageData.uid }}</el-menu-item>\r\n\t\t\t\t\t<el-menu-item index=\"change_psw\">修改密码</el-menu-item>\r\n\t\t\t\t</el-menu-item-group>\r\n\t\t\t</el-submenu>\r\n\t\t\t<el-menu-item index=\"logout\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t\t<span slot=\"title\">登出</span>\r\n\t\t\t</el-menu-item>\r\n\t\t</el-menu>\r\n\t\t<router-view @message=\"handleMessage\" :HomePageData=\"HomePageData\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"HomePage\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tHomePageData: {\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tuid: null,\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\t// let url = 'http://45.77.18.246:8000/users/get/user/';\r\n\t\tlet url = 'http://127.0.0.1:8000/users/get/user/';\r\n\t\tfetch(url, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t})\r\n\t\t\t.then(resp => resp.json())\r\n\t\t\t.then(resp => {\r\n\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\tthis.HomePageData.uid = resp.content.username;\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(reason => {\r\n\t\t\t\tconsole.log('fail to get current user.')\r\n\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogout() {\r\n\t\t\tlet url = this.BASE_URL + 'users/logout/';\r\n\t\t\tfetch(url, {\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t})\r\n\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '登出成功。',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '用户已登出',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log('key:', key, keyPath);\r\n\t\t\tlet route;\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'home':\r\n\t\t\t\t\troute = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'logout':\r\n\t\t\t\t\tthis.handleLogout();\r\n\t\t\t\t\troute = '/'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\troute = key;\r\n\t\t\t}\r\n\t\t\tconsole.log('route:', route);\r\n\t\t\tthis.$router.push(route);\r\n\t\t},\r\n\t\thandleMessage(message) {\r\n\t\t\t// console.log(message);\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase 'login':\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t\tthis.HomePageData.uid = message.uid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#HomePage {\r\n\tfont-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n}\r\n</style>"]}]}