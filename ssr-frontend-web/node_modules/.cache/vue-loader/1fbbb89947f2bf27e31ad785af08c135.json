{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue","mtime":1610608077894},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1609653295176},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQoJbmFtZTogIkhvbWVQYWdlIiwNCglkYXRhKCkgew0KCQlyZXR1cm4gew0KCQkJSG9tZVBhZ2VEYXRhOiB7DQoJCQkJaXNMb2dpbjogZmFsc2UsDQoJCQkJdWlkOiBudWxsLA0KCQkJfSwNCgkJfQ0KCX0sDQoJbW91bnRlZCgpIHsNCgkJbGV0IHVybCA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVJMfXVzZXJzL2dldC91c2VyL2A7DQoJCWZldGNoKHVybCwgew0KCQkJY3JlZGVudGlhbHM6ICdpbmNsdWRlJywNCgkJCWhlYWRlcnM6IHsNCgkJCQknY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KCQkJfSwNCgkJCW1ldGhvZDogJ1BPU1QnLA0KCQkJbW9kZTogJ2NvcnMnLA0KCQl9KQ0KCQkJLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSkNCgkJCS50aGVuKHJlc3AgPT4gew0KCQkJCWlmIChyZXNwLnN0YXR1cyA9PT0gJ29rJykgew0KCQkJCQl0aGlzLkhvbWVQYWdlRGF0YS51aWQgPSByZXNwLmNvbnRlbnQudXNlcm5hbWU7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLmlzTG9naW4gPSB0cnVlOw0KCQkJCX0gZWxzZSB7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IG51bGw7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLmlzTG9naW4gPSBmYWxzZTsNCgkJCQl9DQoJCQl9KQ0KCQkJLmNhdGNoKHJlYXNvbiA9PiB7DQoJCQkJY29uc29sZS5sb2coJ2ZhaWwgdG8gZ2V0IGN1cnJlbnQgdXNlci4nKQ0KCQkJCWNvbnNvbGUubG9nKCdyZWFzb246JywgcmVhc29uKTsNCgkJCX0pOw0KCX0sDQoJbWV0aG9kczogew0KCQloYW5kbGVMb2dvdXQoKSB7DQoJCQlsZXQgdXJsID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwgKyAndXNlcnMvbG9nb3V0Lyc7DQoJCQkvLyBsZXQgdXJsID0gdGhpcy5CQVNFX1VSTCArICd1c2Vycy9sb2dvdXQvJzsNCgkJCWZldGNoKHVybCwgew0KCQkJCWNyZWRlbnRpYWxzOiAnaW5jbHVkZScsDQoJCQkJaGVhZGVyczogew0KCQkJCQknY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLA0KCQkJCX0sDQoJCQkJbWV0aG9kOiAnUE9TVCcsDQoJCQkJbW9kZTogJ2NvcnMnLA0KCQkJfSkNCgkJCQkudGhlbihyZXNwID0+IHJlc3AuanNvbigpKQ0KCQkJCS50aGVuKHJlc3AgPT4gew0KCQkJCQl0aGlzLkhvbWVQYWdlRGF0YS51aWQgPSBudWxsOw0KCQkJCQl0aGlzLkhvbWVQYWdlRGF0YS5pc0xvZ2luID0gZmFsc2U7DQoJCQkJCWlmIChyZXNwLnN0YXR1cyA9PT0gJ29rJykgew0KCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLA0KCQkJCQkJCW1lc3NhZ2U6ICfnmbvlh7rmiJDlip/jgIInLA0KCQkJCQkJCXNob3dDbG9zZTogdHJ1ZSwNCgkJCQkJCX0pOw0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQkJdHlwZTogJ2Vycm9yJywNCgkJCQkJCQltZXNzYWdlOiAn55So5oi35bey55m75Ye6JywNCgkJCQkJCQlzaG93Q2xvc2U6IHRydWUsDQoJCQkJCQl9KTsNCgkJCQkJfQ0KCQkJCX0pDQoJCQkJLmNhdGNoKHJlYXNvbiA9PiB7DQoJCQkJCWNvbnNvbGUubG9nKCdyZWFzb246JywgcmVhc29uKTsNCgkJCQkJdGhpcy4kbWVzc2FnZSh7DQoJCQkJCQl0eXBlOiAnZXJyb3InLA0KCQkJCQkJbWVzc2FnZTogJ+e9kee7nOaVhemanOaIluacjeWKoeWZqOS4jeWPr+eUqOOAgicsDQoJCQkJCQlzaG93Q2xvc2U6IHRydWUNCgkJCQkJfSk7DQoJCQkJfSk7DQoJCX0sDQoJCWhhbmRsZVNlbGVjdChrZXksIGtleVBhdGgpIHsNCgkJCWNvbnNvbGUubG9nKCdrZXk6Jywga2V5LCBrZXlQYXRoKTsNCgkJCWxldCByb3V0ZTsNCgkJCXN3aXRjaCAoa2V5KSB7DQoJCQkJY2FzZSAnaG9tZSc6DQoJCQkJCXJvdXRlID0gJy8nOw0KCQkJCQlicmVhazsNCgkJCQljYXNlICdsb2dvdXQnOg0KCQkJCQl0aGlzLmhhbmRsZUxvZ291dCgpOw0KCQkJCQlyb3V0ZSA9ICcvJw0KCQkJCQlicmVhazsNCgkJCQlkZWZhdWx0Og0KCQkJCQlyb3V0ZSA9IGtleTsNCgkJCX0NCgkJCWNvbnNvbGUubG9nKCdyb3V0ZTonLCByb3V0ZSk7DQoJCQl0aGlzLiRyb3V0ZXIucHVzaChyb3V0ZSk7DQoJCX0sDQoJCWhhbmRsZU1lc3NhZ2UobWVzc2FnZSkgew0KCQkJLy8gY29uc29sZS5sb2cobWVzc2FnZSk7DQoJCQlzd2l0Y2ggKG1lc3NhZ2UudHlwZSkgew0KCQkJCWNhc2UgJ2xvZ2luJzoNCgkJCQkJdGhpcy5Ib21lUGFnZURhdGEuaXNMb2dpbiA9IHRydWU7DQoJCQkJCXRoaXMuSG9tZVBhZ2VEYXRhLnVpZCA9IG1lc3NhZ2UudWlkOw0KCQkJCQlicmVhazsNCgkJCQlkZWZhdWx0Og0KCQkJCQlicmVhazsNCgkJCX0NCgkJfQ0KCX0NCn0NCg=="},{"version":3,"sources":["HomePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HomePage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"HomePage\">\r\n\t\t<el-menu\r\n\t\t\tclass=\"el-menu-demo\"\r\n\t\t\tmode=\"horizontal\"\r\n\t\t\t@select=\"handleSelect\">\r\n\t\t\t<el-menu-item index=\"home\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-house\"></i>\r\n\t\t\t\t<span slot=\"title\">主页</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"login\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-unlock\"></i>\r\n\t\t\t\t<span slot=\"title\">登录</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"register\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-edit-outline\"></i>\r\n\t\t\t\t<span slot=\"title\">注册</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-submenu index=\"user\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span>用户</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<el-menu-item-group>\r\n\t\t\t\t\t<el-menu-item index=\"user_info\" disabled>用户名：{{ this.HomePageData.uid }}</el-menu-item>\r\n\t\t\t\t\t<el-menu-item index=\"change_psw\">修改密码</el-menu-item>\r\n\t\t\t\t</el-menu-item-group>\r\n\t\t\t</el-submenu>\r\n\t\t\t<el-menu-item index=\"logout\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t\t<span slot=\"title\">登出</span>\r\n\t\t\t</el-menu-item>\r\n\t\t</el-menu>\r\n\t\t<router-view @message=\"handleMessage\" :HomePageData=\"HomePageData\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"HomePage\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tHomePageData: {\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tuid: null,\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tlet url = `${process.env.VUE_APP_URL}users/get/user/`;\r\n\t\tfetch(url, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t})\r\n\t\t\t.then(resp => resp.json())\r\n\t\t\t.then(resp => {\r\n\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\tthis.HomePageData.uid = resp.content.username;\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(reason => {\r\n\t\t\t\tconsole.log('fail to get current user.')\r\n\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogout() {\r\n\t\t\tlet url = process.env.VUE_APP_URL + 'users/logout/';\r\n\t\t\t// let url = this.BASE_URL + 'users/logout/';\r\n\t\t\tfetch(url, {\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t})\r\n\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '登出成功。',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '用户已登出',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log('key:', key, keyPath);\r\n\t\t\tlet route;\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'home':\r\n\t\t\t\t\troute = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'logout':\r\n\t\t\t\t\tthis.handleLogout();\r\n\t\t\t\t\troute = '/'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\troute = key;\r\n\t\t\t}\r\n\t\t\tconsole.log('route:', route);\r\n\t\t\tthis.$router.push(route);\r\n\t\t},\r\n\t\thandleMessage(message) {\r\n\t\t\t// console.log(message);\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase 'login':\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t\tthis.HomePageData.uid = message.uid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#HomePage {\r\n\tfont-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n}\r\n</style>"]}]}