{"remainingRequest":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue?vue&type=style&index=0&id=3dd92451&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\src\\components\\HomePage.vue","mtime":1610242898047},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1609653307768},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1609653308845},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1609653308356},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1609653293369},{"path":"C:\\Users\\夏海淞\\WebstormProjects\\ssr-frontend-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1609653308845}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojSG9tZVBhZ2Ugew0KCWZvbnQtZmFtaWx5OiAiSGVsdmV0aWNhIE5ldWUiLCBIZWx2ZXRpY2EsICJQaW5nRmFuZyBTQyIsICJIaXJhZ2lubyBTYW5zIEdCIiwgIk1pY3Jvc29mdCBZYUhlaSIsICLlvq7ova/pm4Xpu5EiLCBBcmlhbCwgc2Fucy1zZXJpZjsNCn0NCg=="},{"version":3,"sources":["HomePage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiJA;AACA;AACA","file":"HomePage.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div id=\"HomePage\">\r\n\t\t<el-menu\r\n\t\t\tclass=\"el-menu-demo\"\r\n\t\t\tmode=\"horizontal\"\r\n\t\t\t@select=\"handleSelect\">\r\n\t\t\t<el-menu-item index=\"home\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-house\"></i>\r\n\t\t\t\t<span slot=\"title\">主页</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"login\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-unlock\"></i>\r\n\t\t\t\t<span slot=\"title\">登录</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-menu-item index=\"register\" v-show=\"!HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-edit-outline\"></i>\r\n\t\t\t\t<span slot=\"title\">注册</span>\r\n\t\t\t</el-menu-item>\r\n\t\t\t<el-submenu index=\"user\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<i class=\"el-icon-user\"></i>\r\n\t\t\t\t\t<span>用户</span>\r\n\t\t\t\t</template>\r\n\t\t\t\t<el-menu-item-group>\r\n\t\t\t\t\t<el-menu-item index=\"user_info\" disabled>用户名：{{ this.HomePageData.uid }}</el-menu-item>\r\n\t\t\t\t\t<el-menu-item index=\"change_psw\">修改密码</el-menu-item>\r\n\t\t\t\t</el-menu-item-group>\r\n\t\t\t</el-submenu>\r\n\t\t\t<el-menu-item index=\"logout\" v-show=\"HomePageData.isLogin\">\r\n\t\t\t\t<i class=\"el-icon-lock\"></i>\r\n\t\t\t\t<span slot=\"title\">登出</span>\r\n\t\t\t</el-menu-item>\r\n\t\t</el-menu>\r\n\t\t<router-view @message=\"handleMessage\" :HomePageData=\"HomePageData\"></router-view>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tname: \"HomePage\",\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tHomePageData: {\r\n\t\t\t\tisLogin: false,\r\n\t\t\t\tuid: null,\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\t// let url = 'http://45.77.18.246:8000/users/get/user/';\r\n\t\tlet url = 'http://127.0.0.1:8000/users/get/user/';\r\n\t\tfetch(url, {\r\n\t\t\tcredentials: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'content-type': 'application/json',\r\n\t\t\t},\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t})\r\n\t\t\t.then(resp => resp.json())\r\n\t\t\t.then(resp => {\r\n\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\tthis.HomePageData.uid = resp.content.username;\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(reason => {\r\n\t\t\t\tconsole.log('fail to get current user.')\r\n\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\thandleLogout() {\r\n\t\t\tlet url = this.BASE_URL + 'users/logout/';\r\n\t\t\tfetch(url, {\r\n\t\t\t\tcredentials: 'include',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'content-type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t})\r\n\t\t\t\t.then(resp => resp.json())\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tthis.HomePageData.uid = null;\r\n\t\t\t\t\tthis.HomePageData.isLogin = false;\r\n\t\t\t\t\tif (resp.status === 'ok') {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmessage: '登出成功。',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '用户已登出',\r\n\t\t\t\t\t\t\tshowClose: true,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(reason => {\r\n\t\t\t\t\tconsole.log('reason:', reason);\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '网络故障或服务器不可用。',\r\n\t\t\t\t\t\tshowClose: true\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\thandleSelect(key, keyPath) {\r\n\t\t\tconsole.log('key:', key, keyPath);\r\n\t\t\tlet route;\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 'home':\r\n\t\t\t\t\troute = '/';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'logout':\r\n\t\t\t\t\tthis.handleLogout();\r\n\t\t\t\t\troute = '/'\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\troute = key;\r\n\t\t\t}\r\n\t\t\tconsole.log('route:', route);\r\n\t\t\tthis.$router.push(route);\r\n\t\t},\r\n\t\thandleMessage(message) {\r\n\t\t\t// console.log(message);\r\n\t\t\tswitch (message.type) {\r\n\t\t\t\tcase 'login':\r\n\t\t\t\t\tthis.HomePageData.isLogin = true;\r\n\t\t\t\t\tthis.HomePageData.uid = message.uid;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#HomePage {\r\n\tfont-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\r\n}\r\n</style>"]}]}