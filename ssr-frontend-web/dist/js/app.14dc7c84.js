(function(e){function t(t){for(var n,r,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==s[l]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var n={},s={app:0},a=[];function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"0363":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DeviceBoard"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.DeviceData,stripe:""}},[o("el-table-column",{attrs:{prop:"name",label:"设备名",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-monitor"}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),o("el-table-column",{attrs:{prop:"location",label:"地点",filters:e.$data.filterRegion,"filter-method":e.filterHandler,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-place"}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.location))])]}}])}),o("el-table-column",{attrs:{prop:"status",label:"状态",filters:[{text:"在线",value:"在线"},{text:"离线",value:"离线"},{text:"故障",value:"故障"}],"filter-method":e.filterHandler,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{class:e.getStatusIcon(t.row.status)}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.status))])]}}])}),o("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])},[o("template",{slot:"header"},[o("span",[e._v("操作")]),o("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary",icon:"el-icon-plus",round:"",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")]),o("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"success",icon:"el-icon-download",round:"",size:"mini"},on:{click:function(t){return e.handleDownload("SSR-设备数据.csv")}}},[e._v("导出 ")])],1)],2)],1),o("el-dialog",{attrs:{title:"设备",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form}},[o("el-form-item",{attrs:{prop:"name",rules:[{required:!0,message:"设备名不能为空"}],label:"设备名"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{prop:"location",label:"地点"}},[o("el-select",{attrs:{placeholder:"请选择地点",filterable:""},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}},e._l(e.$data.optionRegion,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),o("el-form-item",{attrs:{prop:"status",label:"状态"}},[o("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.$data.optionStatus,(function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定")])],1)],1)],1)},s=[],a=(o("99af"),o("c975"),o("a15b"),o("d81d"),o("a434"),o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("b85c")),r={name:"DeviceBoard",data:function(){var e=this,t=this.BASE_URL+"users/get/device/",o={DeviceData:[]};return fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if("ok"===t.status)console.log(t),o.DeviceData=t.content;else{var n,s=t.type;switch(s){case"Already logout.":n="用户已登出。";break;default:n="未知错误。"}e.$message({type:"error",message:n,showClose:!0})}})).catch((function(t){console.log("reason:",t),e.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})})),t=this.BASE_URL+"users/get/place/",fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if("ok"===t.status)console.log("RegionResp:",t),o.optionRegion=t.content.map((function(e){return{label:e.name,value:e.name}})),o.filterRegion=t.content.map((function(e){return{text:e.name,value:e.name}}));else{var n,s=t.type;switch(s){case"Already logout.":n="用户已登出。";break;default:n="未知错误。"}e.$message({type:"error",message:n,showClose:!0})}})).catch((function(t){console.log("reason:",t),e.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})})),o.dialogFormVisible=!1,o.formLabelWidth="120px",o.setTable={index:null,row:null,type:null},o.optionStatus=[{value:"在线",label:"在线"},{value:"离线",label:"离线"},{value:"故障",label:"故障"}],o.form={status:"",location:"",name:""},o},methods:{getStatusIcon:function(e){switch(e){case"故障":return"el-icon-warning";case"在线":return"el-icon-circle-check";case"离线":return"el-icon-circle-close";default:return"el-icon-question"}},filterHandler:function(e,t,o){var n=o["property"];return t[n]===e},handleAdd:function(){this.setTable.type="add",this.dialogFormVisible=!0},handleEdit:function(e,t){console.log(e,t),this.setTable={index:e,row:t,type:"edit"},this.form.status=t.status,this.form.location=t.location,this.form.name=t.name,this.dialogFormVisible=!0},fake_click:function(e){var t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},getData:function(){var e,t=["设备名,地点,状态"],o=Object(a["a"])(this.DeviceData.values());try{for(o.s();!(e=o.n()).done;){var n=e.value,s="".concat(n.name,",").concat(n.location,",").concat(n.status);t.push(s)}}catch(r){o.e(r)}finally{o.f()}return t.join("\n")},handleDownload:function(e){var t=window.URL||window.webkitURL||window,o=this.getData(),n=new Blob(["\ufeff"+o],{type:"text/csv"}),s=document.createElementNS("http://www.w3.org/1999/xhtml","a");s.href=t.createObjectURL(n),s.download=e,this.fake_click(s)},handleDelete:function(e,t){var o=this;console.log(e,t);var n=this.BASE_URL+"users/delete/device/",s={loc_name:t.location,dev_name:t.name};fetch(n,{body:JSON.stringify(s),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){if("ok"===e.status){o.$message({type:"success",message:"删除成功",showClose:!0});var n=o.DeviceData.indexOf(t);o.DeviceData.splice(n,1)}else o.$message({type:"error",message:e.type,showClose:!0})})).catch((function(e){console.log("reason:",e),o.$message({type:"error",message:"网络故障或服务器不可用",showClose:!0})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(o){var n,s=t.setTable,a=t.$refs[e].model,r={status:a.status,loc_name:a.location,dev_name:a.name};"edit"===s.type?(n=t.BASE_URL+"users/set/device/",r.loc_name_old=s.row.location,r.dev_name_old=s.row.name):n=t.BASE_URL+"users/add/device/",fetch(n,{body:JSON.stringify(r),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){"ok"===e.status?t.$message({type:"success",message:"修改成功",showClose:!0}):t.$message({type:"error",message:e.type,showClose:!0})})).catch((function(e){console.log("reason:",e),t.$message({type:"error",message:"网络故障或服务器不可用",showClose:!0})})),"edit"===s.type?(s.row.name=a.name,s.row.location=a.location,s.row.status=a.status):t.DeviceData.push({status:a.status,location:a.location,name:a.name})}else t.$message({type:"warning",message:"您的输入不合法。",showClose:!0})})),this.dialogFormVisible=!1}}},i=r,l=o("2877"),c=Object(l["a"])(i,n,s,!1,null,"442039f5",null);t["a"]=c.exports},1669:function(e,t,o){"use strict";o("51ce")},2136:function(e,t,o){},"25c8":function(e,t,o){},"3dfd":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},s=[],a={name:"App",components:{}},r=a,i=(o("034f"),o("2877")),l=Object(i["a"])(r,n,s,!1,null,null,null);t["a"]=l.exports},4475:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"OrderBoard"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.OrderData,stripe:""}},[o("el-table-column",{attrs:{prop:"device",label:"设备名",filters:e.$data.filterDevice,"filter-method":e.filterHandler,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-monitor"}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.device))])]}}])}),o("el-table-column",{attrs:{prop:"type",label:"工单类型",filters:[{text:"物理损坏",value:"物理损坏"},{text:"无法启动",value:"无法启动"},{text:"无法进出",value:"无法进出"},{text:"其他原因",value:"其他原因"}],"filter-method":e.filterHandler,sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.type))])]}}])}),o("el-table-column",{attrs:{prop:"synopsis",label:"描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("完整描述："+e._s(t.row.description))]),o("div",{staticClass:"synopsis-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.synopsis))])],1)])]}}])})],1)],1)},s=[],a=(o("a4d3"),o("e01a"),o("4160"),o("d3b7"),o("6062"),o("3ca3"),o("159b"),o("ddb0"),o("b85c")),r={name:"OrderBoard",data:function(){var e=this,t=this.BASE_URL+"users/get/order/",o={OrderData:[]},n=new Set;return fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if("ok"===t.status){console.log(t),o.OrderData=t.content;var s,r=Object(a["a"])(o.OrderData);try{for(r.s();!(s=r.n()).done;){var i=s.value;n.has(i.device)||n.add(i.device),i.synopsis=i.description.substring(0,50)}}catch(u){r.e(u)}finally{r.f()}o.filterDevice=[],n.forEach((function(e){return o.filterDevice.push({text:e,value:e})})),console.log(o.OrderData)}else{var l,c=t.type;switch(c){case"Already logout.":l="用户已登出。";break;default:l="未知错误。"}e.$message({type:"error",message:l,showClose:!0})}})).catch((function(t){console.log("reason:",t),e.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})})),o},methods:{filterHandler:function(e,t,o){var n=o["property"];return t[n]===e}}},i=r,l=o("2877"),c=Object(l["a"])(i,n,s,!1,null,"11dd6d77",null);t["a"]=c.exports},"487a":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"HomePage"}},[o("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"},on:{select:e.handleSelect}},[o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.HomePageData.isLogin,expression:"HomePageData.isLogin"}],attrs:{index:"home"}},[o("i",{staticClass:"el-icon-house"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("主页")])]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.HomePageData.isLogin,expression:"!HomePageData.isLogin"}],attrs:{index:"login"}},[o("i",{staticClass:"el-icon-unlock"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("登录")])]),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:!e.HomePageData.isLogin,expression:"!HomePageData.isLogin"}],attrs:{index:"register"}},[o("i",{staticClass:"el-icon-edit-outline"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("注册")])]),o("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.HomePageData.isLogin,expression:"HomePageData.isLogin"}],attrs:{index:"user"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-user"}),o("span",[e._v("用户")])]),o("el-menu-item-group",[o("el-menu-item",{attrs:{index:"user_info",disabled:""}},[e._v("用户名："+e._s(this.HomePageData.uid))]),o("el-menu-item",{attrs:{index:"change_psw"}},[e._v("修改密码")])],1)],2),o("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:e.HomePageData.isLogin,expression:"HomePageData.isLogin"}],attrs:{index:"logout"}},[o("i",{staticClass:"el-icon-lock"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("登出")])])],1),o("router-view",{attrs:{HomePageData:e.HomePageData},on:{message:e.handleMessage}})],1)},s=[],a=(o("d3b7"),{name:"HomePage",data:function(){return{HomePageData:{isLogin:!1,uid:null}}},mounted:function(){var e=this,t="http://127.0.0.1:8000/users/get/user/";fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(t){"ok"===t.status?(e.HomePageData.uid=t.content.username,e.HomePageData.isLogin=!0):(e.HomePageData.uid=null,e.HomePageData.isLogin=!1)})).catch((function(e){console.log("fail to get current user."),console.log("reason:",e)}))},methods:{handleLogout:function(){var e=this,t=this.BASE_URL+"users/logout/";fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(t){e.HomePageData.uid=null,e.HomePageData.isLogin=!1,"ok"===t.status?e.$message({type:"success",message:"登出成功。",showClose:!0}):e.$message({type:"error",message:"用户已登出",showClose:!0})})).catch((function(t){console.log("reason:",t),e.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})}))},handleSelect:function(e,t){var o;switch(console.log("key:",e,t),e){case"home":o="/";break;case"logout":this.handleLogout(),o="/";break;default:o=e}console.log("route:",o),this.$router.push(o)},handleMessage:function(e){switch(e.type){case"login":this.HomePageData.isLogin=!0,this.HomePageData.uid=e.uid;break;default:break}}}}),r=a,i=(o("64a1"),o("2877")),l=Object(i["a"])(r,n,s,!1,null,"3dd92451",null);t["a"]=l.exports},"4cd9":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"RegisterView"}},[o("el-col",{attrs:{span:8,offset:8}},[o("h1",[e._v("用户注册")]),o("el-form",{ref:"RegForm",attrs:{model:e.RegForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"uid"}},[o("el-input",{model:{value:e.RegForm.uid,callback:function(t){e.$set(e.RegForm,"uid",t)},expression:"RegForm.uid"}})],1),o("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[o("el-input",{model:{value:e.RegForm.email,callback:function(t){e.$set(e.RegForm,"email",t)},expression:"RegForm.email"}})],1),o("el-form-item",{attrs:{label:"密码",prop:"psw1"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.RegForm.psw1,callback:function(t){e.$set(e.RegForm,"psw1",t)},expression:"RegForm.psw1"}})],1),o("el-form-item",{attrs:{label:"重复密码",prop:"psw2"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.RegForm.psw2,callback:function(t){e.$set(e.RegForm,"psw2",t)},expression:"RegForm.psw2"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("RegForm")}}},[e._v("注册")]),o("el-button",{on:{click:function(t){return e.resetForm("RegForm")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],a=(o("d3b7"),{name:"RegisterView",data:function(){var e=this,t=function(e,t,o){return""===t?o(new Error("值不能为空")):o()},o=function(t,o,n){return""===o?n(new Error("请输入密码")):(""!==e.RegForm.psw2&&e.$refs.RegForm.validateField("psw2"),n())},n=function(t,o,n){return""===o?n(new Error("请再次输入密码")):o!==e.RegForm.psw1?n(new Error("两次密码输入不一致！")):n()};return{RegForm:{uid:"",email:"",psw1:"",psw2:""},rules:{uid:{validator:t,trigger:"blur"},email:{validator:t,trigger:"blur"},psw1:{validator:o,trigger:"blur"},psw2:{validator:n,trigger:"blur"}}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return t.$message({type:"warning",message:"您的输入不合法。",showClose:!0}),!1;console.log("submit!");var n=t.BASE_URL+"users/register/",s=t.$refs[e].model,a={username:s.uid,psw1:s.psw1,psw2:s.psw2,email:s.email,auth:"business"};fetch(n,{body:JSON.stringify(a),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){if("ok"===e.status)t.$message({type:"success",message:"注册成功",showClose:!0});else{var o,n=e.type;switch(n){case"Invalid email address.":o="邮件地址不合法。";break;case"Username already exist.":o="用户名已存在。";break;case"Email address has been used.":o="邮箱已被用于注册。";break;case"Already login.":o="该账号已在别处登录。";break;default:o="未知错误。"}t.$message({type:"error",message:o,showClose:!0})}})).catch((function(e){console.log("reason:",e),t.$message({type:"error",message:"网络故障或服务器不可用",showClose:!0})}))}))},resetForm:function(e){this.$refs[e].resetFields()}}}),r=a,i=(o("1669"),o("2877")),l=Object(i["a"])(r,n,s,!1,null,"68fe0e13",null);t["a"]=l.exports},"51ce":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t),function(e){o("e260"),o("e6cf"),o("cca6"),o("a79d");var t=o("2b0e"),n=o("8c4f"),s=o("3dfd"),a=o("5c96"),r=o.n(a),i=(o("0fae"),o("487a")),l=o("9be6"),c=o("4cd9"),u=o("6e40"),d=o("eb58"),m=o("f458"),f=o("0363"),p=o("4475"),g=o("bcae");t["default"].use(r.a),t["default"].use(n["a"]),t["default"].config.productionTip=!1,t["default"].config.productionTip=!1;var h=[{path:"/",component:i["a"],children:[{path:"login",component:l["a"]},{path:"register",component:c["a"]},{path:"",component:u["a"],children:[{path:"region",component:m["a"]},{path:"device",component:f["a"]},{path:"order",component:p["a"]},{path:"income",component:g["a"]}]},{path:"change_psw",component:d["a"]}]}],v=new n["a"]({mode:"history",routes:h});new t["default"]({router:v,render:function(e){return e(s["a"])}}).$mount("#app");var w=Object({NODE_ENV:"production",BASE_URL:"/"}).argv;console.log("tmp=",w),w=e.argv,console.log("tmp=",w),w=e.execArgv,console.log("tmp=",w),t["default"].prototype.BASE_URL="http://127.0.0.1:8000/"}.call(this,o("4362"))},"64a1":function(e,t,o){"use strict";o("2136")},6995:function(e,t,o){"use strict";o("d6bf")},"6e40":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"WelcomeView"}},[e.HomePageData.isLogin?o("el-container",[o("el-aside",{attrs:{width:"200px"}},[o("el-menu",{on:{open:e.handleOpen,close:e.handleClose}},[o("el-menu-item",{attrs:{index:"region"},on:{click:e.handleClick}},[o("i",{staticClass:"el-icon-location-outline"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("地点")])]),o("el-menu-item",{attrs:{index:"device"},on:{click:e.handleClick}},[o("i",{staticClass:"el-icon-monitor"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("设备")])]),o("el-menu-item",{attrs:{index:"order"},on:{click:e.handleClick}},[o("i",{staticClass:"el-icon-message"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("工单")])]),o("el-menu-item",{attrs:{index:"income"},on:{click:e.handleClick}},[o("i",{staticClass:"el-icon-data-line"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("营收")])])],1)],1),o("el-main",[e.HomePageData.isLogin?o("router-view",{attrs:{HomePageData:e.HomePageData}}):e._e()],1)],1):e._e(),e.HomePageData.isLogin?e._e():o("div",{staticClass:"not-login"},[o("div",{attrs:{id:"not-login-SSRD"}},[e._v("SSR-Dashboard")]),o("div",{attrs:{id:"not-login—SSR"}},[e._v("Shared Shower Room")])])],1)},s=[],a={name:"WelcomeView",props:["HomePageData"],watch:{HomePageData:function(e){this.HomePageData=e}},methods:{handleOpen:function(e,t){console.log("key:",e,t)},handleClose:function(e,t){console.log("key:",e,t)},handleClick:function(e,t){console.log("key:",e,t),console.log("key.index:",e.index),this.$router.push(e.index)}}},r=a,i=(o("6995"),o("2877")),l=Object(i["a"])(r,n,s,!1,null,"41761d35",null);t["a"]=l.exports},"85ec":function(e,t,o){},"9be6":function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"LoginView"}},[o("el-col",{attrs:{span:8,offset:8}},[o("h1",[e._v("用户登录")]),o("el-form",{ref:"LoginForm",staticClass:"demo-ruleForm",attrs:{model:e.LoginForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"uid"}},[o("el-input",{model:{value:e.LoginForm.uid,callback:function(t){e.$set(e.LoginForm,"uid",t)},expression:"LoginForm.uid"}})],1),o("el-form-item",{attrs:{label:"密码",prop:"psw"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.LoginForm.psw,callback:function(t){e.$set(e.LoginForm,"psw",t)},expression:"LoginForm.psw"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("LoginForm")}}},[e._v("登录")]),o("el-button",{on:{click:function(t){return e.resetForm("LoginForm")}}},[e._v("重置")]),o("el-link",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:e.handleReset}},[e._v("忘记密码？")])],1)],1)],1)],1)},s=[],a=(o("d3b7"),o("ac1f"),o("5319"),{data:function(){var e=function(e,t,o){return t?o():o(new Error("用户名不能为空"))},t=function(e,t,o){return""===t?o(new Error("请输入密码")):o()};return{LoginForm:{uid:"",psw:""},rules:{uid:[{validator:e,trigger:"blur"}],psw:[{validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return t.$message({type:"warning",showClose:!0,message:"您的输入不合法。"}),!1;console.log("submit!");var n=t.BASE_URL+"users/login/",s=t.$refs[e].model,a={username:s.uid,psw:s.psw,auth:"business"};fetch(n,{body:JSON.stringify(a),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(o){if("ok"===o.status)t.$message({type:"success",message:"登录成功",showClose:!0}),t.$emit("message",{type:"login",uid:s.uid}),t.$router.replace("/");else{var n,a=o.type;switch(a){case"Already login.":n="该账号已在别处登录。";break;case"Username not exist.":n="用户名不存在或密码错误。";break;case"User has not accomplished email confirmation.":n="用户尚未通过邮箱验证。";break;case"Wrong password.":n="用户名不存在或密码错误。";break;default:n="未知错误。"}t.resetForm(e),t.$message({type:"error",message:n,showClose:!0})}})).catch((function(o){console.log("reason:",o),t.resetForm(e),t.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})}))}))},resetForm:function(e){this.$refs[e].resetFields()},handleReset:function(){var e=this;console.log("handleReset"),this.$prompt("请输入您的用户名，系统将会随机重置您的账号的密码，并将其发送到您的邮箱上，您随后可重新修改密码。\n您确定要重置密码吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(t){var o=t.value,n=e.BASE_URL+"users/reset/psw/",s={username:o,auth:"business"};fetch(n,{body:JSON.stringify(s),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if("ok"===t.status)e.$notify({type:"success",title:"重置成功",message:"请登录邮箱查看您的重置密码。"});else{var o;switch(t.type){case"Already login.":o="该账号已登录，无法重置。";break;case"Username not exist.":o="用户名不存在。";break;case"This account has not accomplished email confirmation.":o="该账号尚未通过邮箱验证。";break;default:o="未知错误。"}e.$notify({type:"error",title:"重置失败",message:o})}}))})).catch((function(){e.$notify.info({title:"已取消重置"})}))}},name:"LoginView"}),r=a,i=(o("d026"),o("2877")),l=Object(i["a"])(r,n,s,!1,null,"2e9deb94",null);t["a"]=l.exports},bcae:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"IncomeBoard"}})},s=[],a={name:"IncomeBoard"},r=a,i=o("2877"),l=Object(i["a"])(r,n,s,!1,null,"10b1c4ae",null);t["a"]=l.exports},d026:function(e,t,o){"use strict";o("25c8")},d6bf:function(e,t,o){},eb58:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"ChangePassword"}},[o("el-col",{attrs:{span:8,offset:8}},[o("h1",[e._v("修改密码")]),o("el-form",{ref:"ChangePswForm",attrs:{model:e.ChangePswForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"旧密码",prop:"oldPsw"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ChangePswForm.oldPsw,callback:function(t){e.$set(e.ChangePswForm,"oldPsw",t)},expression:"ChangePswForm.oldPsw"}})],1),o("el-form-item",{attrs:{label:"新密码",prop:"newPsw"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ChangePswForm.newPsw,callback:function(t){e.$set(e.ChangePswForm,"newPsw",t)},expression:"ChangePswForm.newPsw"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ChangePswForm")}}},[e._v("提交")]),o("el-button",{on:{click:function(t){return e.resetForm("ChangePswForm")}}},[e._v("重置")])],1)],1)],1)],1)},s=[],a=(o("d3b7"),o("ac1f"),o("5319"),{name:"ChangePassword",data:function(){var e=this,t=function(t,o,n){return""===o?n(new Error("请输入旧密码")):(""!==e.ChangePswForm.newPsw&&e.$refs.ChangePswForm.validateField("newPsw"),n())},o=function(t,o,n){return""===o?n(new Error("请输入新密码")):o===e.ChangePswForm.oldPsw?n(new Error("两次密码输入一致！")):n()};return{ChangePswForm:{oldPsw:"",newPsw:""},rules:{oldPsw:{validator:t,trigger:"blur"},newPsw:{validator:o,trigger:"blur"}}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(!o)return t.$message({type:"warning",showClose:!0,message:"您的输入不合法。"}),!1;console.log("submit!");var n=t.BASE_URL+"users/set/psw/",s=t.$refs[e].model,a={old_password:s.oldPsw,new_password:s.newPsw};fetch(n,{body:JSON.stringify(a),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){if("ok"===e.status)return t.$message({type:"success",message:"修改成功",showClose:!0}),t.$router.replace("/"),!0;var o,n=e.type;switch(n){case"Already logout.":o="用户已登出。";break;case"Invalid new password.":o="用户新密码不合法。";break;case"New password cannot be the same with old password.":o="新旧密码不能相同。";break;case"Wrong password.":o="密码错误。";break;default:o="未知错误。"}return t.$message({type:"error",message:o,showClose:!0}),!1})).catch((function(o){return console.log("reason:",o),t.resetForm(e),t.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0}),!1}))}))},resetForm:function(e){this.$refs[e].resetFields()}}}),r=a,i=o("2877"),l=Object(i["a"])(r,n,s,!1,null,"f1db4a40",null);t["a"]=l.exports},f458:function(e,t,o){"use strict";var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"RegionBoard"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.RegionData,stripe:""}},[o("el-table-column",{attrs:{prop:"name",label:"地名",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("i",{staticClass:"el-icon-place"}),o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),o("el-table-column",{attrs:{prop:"longitude",label:"经度",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.longitude))])]}}])}),o("el-table-column",{attrs:{prop:"latitude",label:"纬度",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.latitude))])]}}])}),o("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")]),o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])},[o("template",{slot:"header"},[o("span",[e._v("操作")]),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",icon:"el-icon-plus",round:"",size:"mini"},on:{click:e.handleAdd}},[e._v("新增 ")]),o("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"success",icon:"el-icon-download",round:"",size:"mini"},on:{click:function(t){return e.handleDownload("SSR-地点数据.csv")}}},[e._v("导出 ")])],1)],2)],1),o("el-dialog",{attrs:{title:"地点",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"form",attrs:{model:e.form}},[o("el-form-item",{attrs:{prop:"name",rules:[{required:!0,message:"地名不能为空"}],label:"地名"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{prop:"longitude",rules:[{required:!0,message:"经度不能为空"},{type:"number",message:"经度必须为数字"}],label:"经度"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.longitude,callback:function(t){e.$set(e.form,"longitude",e._n(t))},expression:"form.longitude"}})],1),o("el-form-item",{attrs:{prop:"latitude",rules:[{required:!0,message:"纬度不能为空"},{type:"number",message:"纬度必须为数字"}],label:"纬度"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.latitude,callback:function(t){e.$set(e.form,"latitude",e._n(t))},expression:"form.latitude"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("确定")])],1)],1)],1)},s=[],a=(o("99af"),o("c975"),o("a15b"),o("a434"),o("b0c0"),o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("b85c")),r={name:"RegionBoard",data:function(){var e=this,t=this.BASE_URL+"users/get/place/",o={RegionData:[]};return fetch(t,{credentials:"include",headers:{"content-type":"application/json"},method:"GET",mode:"cors"}).then((function(e){return e.json()})).then((function(t){if("ok"===t.status)console.log(t),o.RegionData=t.content;else{var n,s=t.type;switch(s){case"Already logout.":n="用户已登出。";break;default:n="未知错误。"}e.$message({type:"error",message:n,showClose:!0})}})).catch((function(t){console.log("reason:",t),e.$message({type:"error",message:"网络故障或服务器不可用。",showClose:!0})})),o.dialogFormVisible=!1,o.formLabelWidth="120px",o.setTable={index:null,row:null,type:null},o.form={longitude:"",latitude:"",name:""},o},methods:{handleEdit:function(e,t){this.setTable={index:e,row:t,type:"edit"},this.form.name=t.name,this.form.longitude=t.longitude,this.form.latitude=t.latitude,this.dialogFormVisible=!0},handleAdd:function(){this.setTable.type="add",this.dialogFormVisible=!0},fake_click:function(e){var t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(t)},getData:function(){var e,t=["地名,经度,纬度"],o=Object(a["a"])(this.RegionData.values());try{for(o.s();!(e=o.n()).done;){var n=e.value,s="".concat(n.name,",").concat(n.longitude,",").concat(n.latitude);t.push(s)}}catch(r){o.e(r)}finally{o.f()}return t.join("\n")},handleDownload:function(e){var t=window.URL||window.webkitURL||window,o=this.getData(),n=new Blob(["\ufeff"+o],{type:"text/csv"}),s=document.createElementNS("http://www.w3.org/1999/xhtml","a");s.href=t.createObjectURL(n),s.download=e,this.fake_click(s)},handleDelete:function(e,t){var o=this;console.log(e,t);var n=this.BASE_URL+"users/delete/place/",s={name:t.name};fetch(n,{body:JSON.stringify(s),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){if("ok"===e.status){o.$message({type:"success",message:"删除成功",showClose:!0});var n=o.RegionData.indexOf(t);o.RegionData.splice(n,1)}else o.$message({type:"error",message:e.type,showClose:!0})})).catch((function(e){console.log("reason:",e),o.$message({type:"error",message:"网络故障或服务器不可用",showClose:!0})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(o){if(o){var n,s=t.setTable,a=t.$refs[e].model,r={longitude:a.longitude,latitude:a.latitude};"edit"===s.type?(n=t.BASE_URL+"users/set/place/",r.old_name=s.row.name,r.new_name=a.name):(n=t.BASE_URL+"users/add/place/",r.name=a.name),fetch(n,{body:JSON.stringify(r),credentials:"include",headers:{"content-type":"application/json"},method:"POST",mode:"cors"}).then((function(e){return e.json()})).then((function(e){"ok"===e.status?t.$message({type:"success",message:"修改成功",showClose:!0}):t.$message({type:"error",message:e.type,showClose:!0})})).catch((function(e){console.log("reason:",e),t.$message({type:"error",message:"网络故障或服务器不可用",showClose:!0})})),"edit"===s.type?(s.row.name=a.name,s.row.longitude=a.longitude,s.row.latitude=a.latitude):t.RegionData.push(r)}else t.$message({type:"warning",message:"您的输入不合法。",showClose:!0})})),this.dialogFormVisible=!1}}},i=r,l=o("2877"),c=Object(l["a"])(i,n,s,!1,null,"edd0112e",null);t["a"]=c.exports}});
//# sourceMappingURL=app.14dc7c84.js.map